<div th:fragment="header">
    <nav class="main-header navbar navbar-expand navbar-white navbar-light" style="width: 100%; margin-left: 0px;">
        <ul class="navbar-nav ml-auto">
            <img th:src="@{{context_path}/images/account.svg(context_path=${context_path})}"
                 style="width:40px; height: 40px;">
            <li class="nav-item dropdown">
                <a class="nav-link dropdown-toggle" id="navbarDropdownMenuLink" role="button" data-toggle="dropdown"
                   aria-haspopup="true" aria-expanded="false" th:text="${userLogo}">
                </a>
                <div class="dropdown-menu dropdown-menu-right" aria-labelledby="navbarDropdownMenuLink">
                    <a class="dropdown-item" th:href="@{{context_path}/logout(context_path=${context_path})}"
                       data-toggle="modal" data-target="#confirmationModal">Вийти</a>
                </div>
            </li>
        </ul>
    </nav>

    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css"
          integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous">

    <script src="https://code.jquery.com/jquery-3.3.1.slim.min.js"
            integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo"
            crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/umd/popper.min.js"
            integrity="sha384-UO2eT0CpHqdSJQ6hJty5KVphtPhzWj9WO1clHTMGa3JDZwrnQq4sF86dIHNDz0W1"
            crossorigin="anonymous"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js"
            integrity="sha384-JjSmVgyd0p3pXB1rRibZUAYoIIy6OrQ6VrjIEaFf/nJGzIxFDsf4x0xIM+B07jRM"
            crossorigin="anonymous"></script>

    <div class="modal fade" id="confirmationModal" tabindex="-1" role="dialog" aria-labelledby="confirmationModalLabel"
         aria-hidden="true">
        <div class="modal-dialog" role="document">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="confirmationModalLabel">Підтвердження дії</h5>
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                        <span aria-hidden="true">&times;</span>
                    </button>
                </div>
                <div class="modal-body">
                    <p>Ви впевнені, що хочете вийти?</p>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-dismiss="modal">Ні</button>
                    <a class="btn btn-primary" th:href="@{{context_path}/logout(context_path=${context_path})}">Так</a>
                </div>
            </div>
        </div>
    </div>

    <aside class="main-sidebar sidebar-dark-primary elevation-4" style="height: 100%">
        <div class="sidebar os-host os-theme-light os-host-overflow os-host-overflow-y os-host-resize-disabled os-host-scrollbar-horizontal-hidden os-host-transition">
            <div class="os-padding">
                <div class="os-content" style="padding: 0px 8px; height: 100%; width: 100%;">
                    <a th:href="@{{context_path}/admin/(context_path=${context_path})}"
                       class="d-flex align-items-center mb-3 mb-md-0 me-md-auto text-white text-decoration-none">
                        <svg class="bi me-2" width="40" height="32">
                            <use xlink:href="#bootstrap"></use>
                        </svg>
                        <span class="fs-4">USAINUA</span>
                    </a>
                    <hr>
                    <div class="nav nav-pills flex-column mb-auto">
                        <a th:href="@{{context_path}/admin/(context_path=${context_path})}" class="nav-link">
                            <i class="nav-icon fas fa-chart-pie"></i>
                            <p>
                                Статистика
                                <i class="right fas fa-angle-left"></i>
                            </p>
                        </a>
                        <a th:href="@{{context_path}/admin/shop/(context_path=${context_path})}" class="nav-link">
                            <i class="nav-icon fas fa-chart-pie"></i>
                            <p>
                                Магазини
                                <i class="right fas fa-angle-left"></i>
                            </p>
                        </a>
                        <a th:href="@{{context_path}/admin/product/(context_path=${context_path})}" class="nav-link">
                            <i class="nav-icon fas fa-chart-pie"></i>
                            <p>
                                Продукти
                                <i class="right fas fa-angle-left"></i>
                            </p>
                        </a>
                        <a th:href="@{{context_path}/admin/additional-service/(context_path=${context_path})}"
                           class="nav-link">
                            <i class="nav-icon fas fa-chart-pie"></i>
                            <p>
                                Сервіси
                                <i class="right fas fa-angle-left"></i>
                            </p>
                        </a>
                        <a th:href="@{{context_path}/admin/storage/(context_path=${context_path})}" class="nav-link">
                            <i class="nav-icon fas fa-chart-pie"></i>
                            <p>
                                Склади
                                <i class="right fas fa-angle-left"></i>
                            </p>
                        </a>
                        <a th:href="@{{context_path}/admin/news/(context_path=${context_path})}" class="nav-link">
                            <i class="nav-icon fas fa-chart-pie"></i>
                            <p>
                                Новини
                                <i class="right fas fa-angle-left"></i>
                            </p>
                        </a>
                        <a th:href="@{{context_path}/admin/order/(context_path=${context_path})}" class="nav-link">
                            <i class="nav-icon fas fa-chart-pie"></i>
                            <p>
                                Замовлення
                                <i class="right fas fa-angle-left"></i>
                            </p>
                        </a>
                        <a th:href="@{{context_path}/admin/user/(context_path=${context_path})}" class="nav-link">
                            <i class="nav-icon fas fa-chart-pie"></i>
                            <p>
                                Користувачі
                                <i class="right fas fa-angle-left"></i>
                            </p>
                        </a>
                        <a th:href="@{{context_path}/admin/user/admins/(context_path=${context_path})}"
                           class="nav-link">
                            <i class="nav-icon fas fa-chart-pie"></i>
                            <p>
                                Адміни
                                <i class="right fas fa-angle-left"></i>
                            </p>
                        </a>
                    </div>
                </div>
            </div>
        </div>
    </aside>
    <script>
        var currentUrl = window.location.pathname;
        var index = 0;
        var links = document.querySelectorAll('a');
        var navLinks = document.querySelectorAll('.nav-link');
        navLinks.forEach(function(link) {
            if (link.getAttribute('href') === currentUrl) {
                link.classList.add('active');
            }
        });
        links.forEach(function (link) {
            if (link.href.includes('/admin/user/') && currentUrl.includes('/admin/user/')) {
                if (currentUrl.includes('/admin/user/admins/') || link.href.includes('/admin/user/admins/')) console.log(link.href);
                else link.classList.add('active');
            }
            if (link.href.includes('/admin/user/admins/') && currentUrl.includes('/admin/user/admins/')) {
                console.log(currentUrl.includes('/admin/user/admins/'))
                link.classList.add('active');
            }
            if (link.href.includes('/admin/shop/') && currentUrl.includes('/admin/shop/')) {
                console.log(currentUrl.includes('/admin/user/admins/'))
                link.classList.add('active');
            }
            if (link.href.includes('/admin/product/') && currentUrl.includes('/admin/product/')) {
                console.log(currentUrl.includes('/admin/user/admins/'))
                link.classList.add('active');
            }
            if (link.href.includes('/additional-service/') && currentUrl.includes('/additional-service/')) {
                console.log(currentUrl.includes('/admin/user/admins/'))
                link.classList.add('active');
            }
            if (link.href.includes('/admin/storage/') && currentUrl.includes('/admin/storage/')) {
                console.log(currentUrl.includes('/admin/user/admins/'))
                link.classList.add('active');
            }
            if (link.href.includes('/admin/news/') && currentUrl.includes('/admin/news/')) {
                console.log(currentUrl.includes('/admin/user/admins/'))
                link.classList.add('active');
            }
            if (link.href.includes('/admin/order/') && currentUrl.includes('/admin/order/')) {
                console.log(currentUrl.includes('/admin/user/admins/'))
                link.classList.add('active');
            }

        });

    </script>
</div>